# DIP 验收数据准备

## Context
- 目标：为 DIP 端到端手工验收准备一套可用数据（UI+API 联动）。
- 用户已有 `bun run db:seed`，希望在现有种子数据上完善。

## Decisions
-

## Plan
-

## Findings
- `db:seed` 入口：根 `package.json` → `bun run --filter server db:seed`，实际执行 `apps/server/scripts/seed.ts`。
- 当前工作区不干净：`Dockerfile`, `apps/server/scripts/seed-mes.ts`, `apps/server/scripts/seed-roles.ts`, `apps/server/scripts/seed.ts` 已修改。
- `apps/server/scripts/seed.ts` 当前包含 SMT+DIP 主数据与演示 WO/Run/Unit：DIP Run `RUN-DEMO-DIP-001`、WO `WO-DEMO-DIP-RUN-001`，Run 状态 `PREP`、Unit 初始 `QUEUED`、routeVersion 需编译为 `READY`。
- 当前脚本中 `LINE-A` 仅启用 `ROUTE/LOADING` 就绪检查；未看到设备/物料/钢网/锡膏等数据在 `seed.ts` 内生成（需确认是否由其他脚本补充）。
- OQC 抽检触发依赖 sampling rule；若无规则或 sampleSize=0，会直接将 Run 置为 COMPLETED（不触发 OQC）。
- OQC sampling rule 字段：`productCode?`/`lineId?`/`routingId?`、`samplingType`(PERCENTAGE/FIXED)、`sampleValue`、`priority`、`isActive`、`meta?`。

## Progress
-

## Errors
-

## Open Questions
- 是否在现有工作区继续修改，还是新建 worktree 以避免脏状态干扰？
- 需生成的 DIP 验收数据范围（是否包含 OQC/MRB 分支与返修 Run）？

## References
-
