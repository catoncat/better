# MES å‰ç«¯ä¸šåŠ¡å¯ç”¨æ€§å®¡æŸ¥ (AI Agent ç‰ˆ)

## å®¡æŸ¥ç›®æ ‡

ä»**çœŸå®ç”¨æˆ·å®Œæˆæ—¥å¸¸å·¥ä½œ**çš„è§’åº¦å®¡æŸ¥å‰ç«¯ä»£ç ï¼Œä¸å…³æ³¨ç¾è§‚/æ€§èƒ½ï¼Œåªå…³æ³¨ï¼š
1. ä¸šåŠ¡æµç¨‹èƒ½å¦è·‘é€š
2. ç”¨æˆ·èƒ½å¦ç‹¬ç«‹å®Œæˆä»»åŠ¡ï¼ˆä¸ä¾èµ–API/åå°æ“ä½œï¼‰
3. äº¤äº’æ˜¯å¦ç¬¦åˆå®é™…å·¥ä½œä¹ æƒ¯

---

## å®¡æŸ¥çº¦æŸ

### èŒƒå›´é™åˆ¶
- æ¯ä¸ªè§’è‰² **3-5ä¸ªæ ¸å¿ƒåœºæ™¯**
- æ€»åœºæ™¯æ•°æ§åˆ¶åœ¨ **20ä¸ªä»¥å†…**
- æ¯ä¸ªåœºæ™¯è®°å½• **å…³é”®ä»£ç è·¯å¾„** å’Œ **äº¤äº’æ–­ç‚¹**

### æ£€æŸ¥æ¨¡å¼ï¼ˆæ¯ä¸ªåœºæ™¯å¿…é¡»éµå¾ªï¼‰

å¯¹æ¯ä¸ªåœºæ™¯ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥å¹¶è®°å½•ï¼š

```
1. å…¥å£æ£€æŸ¥ï¼šé¡µé¢/ç»„ä»¶ä¸­æ˜¯å¦å­˜åœ¨è§¦å‘å…¥å£ï¼ˆæŒ‰é’®/é“¾æ¥/èœå•ï¼‰
      â†“
2. äº¤äº’æ£€æŸ¥ï¼šå…¥å£çš„ onClick/onSubmit æ˜¯å¦ç»‘å®šæœ‰æ•ˆå¤„ç†å‡½æ•°
      â†“
3. æ•°æ®æ£€æŸ¥ï¼šå¤„ç†å‡½æ•°æ˜¯å¦è°ƒç”¨æ­£ç¡®çš„ mutation/query hook
      â†“
4. APIæ£€æŸ¥ï¼šhook è°ƒç”¨çš„ API è·¯å¾„æ˜¯å¦åœ¨åç«¯è·¯ç”±ä¸­æ³¨å†Œ
```

æ£€æŸ¥é“¾æ–­è£‚çš„ä»»æ„ç¯èŠ‚ â†’ æ ‡è®°å¯¹åº”ä¸¥é‡æ€§

### è¯æ®è¦æ±‚
- å¿…é¡»è®°å½•å…·ä½“æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ `apps/web/src/routes/_authenticated/mes/work-orders.tsx:L45`ï¼‰
- å¿…é¡»è®°å½•å…³é”®ç»„ä»¶/hookï¼ˆå¦‚ `useWorkOrders`, `WorkOrderReceiveDialog`ï¼‰
- æ¨æ–­ä¾æ®éœ€è¯´æ˜ï¼šåŸºäºä»£ç é€»è¾‘ / åŸºäºAPIå¥‘çº¦ / åŸºäºUIç»„ä»¶èƒ½åŠ›
- **è‹¥ä»…å‡­ä»£ç æ— æ³•éªŒè¯ï¼Œæ ‡æ³¨ä¸º `[éœ€çœŸå®ç¯å¢ƒéªŒè¯]`**

### ä¸¥é‡æ€§å®šä¹‰

| çº§åˆ« | å®šä¹‰ | åˆ¤å®šæ ‡å‡† |
|-----|------|---------|
| ğŸ”´ é˜»æ–­ | ç”¨æˆ·æ— æ³•å®Œæˆæ ¸å¿ƒä»»åŠ¡ | ç¼ºå°‘å¿…è¦å…¥å£/æŒ‰é’®/è¡¨å•ï¼›APIæœªå®ç°ï¼›çŠ¶æ€æµè½¬æ–­è£‚ |
| ğŸŸ¡ ä½æ•ˆ | èƒ½å®Œæˆä½†æ“ä½œç¹ç | éœ€è·³è½¬3+é¡µé¢ï¼›æ— æ³•æ‰¹é‡æ“ä½œï¼›éœ€æ‰‹åŠ¨è¾“å…¥å¯è‡ªåŠ¨è·å–çš„ä¿¡æ¯ |
| ğŸŸ¢ ä½“éªŒ | å¯ç”¨ä½†ä¸å‹å¥½ | ç¼ºå°‘åé¦ˆ/ç¡®è®¤ï¼›ä¿¡æ¯ä½ç½®ä¸ç›´è§‚ï¼›ç¼ºå°‘å¿«æ·æ“ä½œ |

### é€šè¿‡/å¤±è´¥æ ‡å‡†
- âœ… é€šè¿‡ï¼šç”¨æˆ·å¯ç‹¬ç«‹å®Œæˆä»»åŠ¡ï¼Œæ— éœ€æŠ€æœ¯æ”¯æŒ
- âš ï¸ éƒ¨åˆ†é€šè¿‡ï¼šèƒ½å®Œæˆä½†æœ‰æ˜æ˜¾æ‘©æ“¦ç‚¹
- âŒ å¤±è´¥ï¼šæµç¨‹æ–­è£‚æˆ–ç¼ºå°‘å…³é”®åŠŸèƒ½

### æ‰§è¡Œé¡ºåº

```
ç¬¬ä¸€æ­¥ï¼šå‰ç½®ä¾èµ–æ£€æŸ¥ï¼ˆç§å­æ•°æ®ã€æƒé™ã€è·¯ç”±æ³¨å†Œï¼‰
   â†“
ç¬¬äºŒæ­¥ï¼šé€è§’è‰²èµ°æŸ¥ï¼ˆå®Œæˆä¸€ä¸ªè§’è‰²åè¾“å‡ºè¯¥è§’è‰²ç»“æœï¼Œå†ç»§ç»­ä¸‹ä¸€ä¸ªï¼‰
   â†“
ç¬¬ä¸‰æ­¥ï¼šè·¨è§’è‰²åä½œæ£€æŸ¥
   â†“
ç¬¬å››æ­¥ï¼šæ±‡æ€»è¾“å‡º
```

### åœæ­¢æ¡ä»¶
- æ¯ä¸ªè§’è‰²å®Œæˆæ‰€æœ‰åœºæ™¯æ£€æŸ¥å¹¶è¾“å‡ºç»“æœåï¼Œè¿›å…¥ä¸‹ä¸€è§’è‰²
- æ‰€æœ‰è§’è‰²å®Œæˆåï¼Œè¾“å‡ºæ±‡æ€»è¡¨æ ¼
- è‹¥æ£€æŸ¥è¿‡ç¨‹ä¸­å‘ç°é˜»æ–­æ€§é—®é¢˜è¶…è¿‡ 5 ä¸ªï¼Œå¯æå‰ç»ˆæ­¢å¹¶è¾“å‡ºå·²å‘ç°é—®é¢˜

---

## å‰ç½®æ£€æŸ¥ï¼šæ•°æ®ä¸ç¯å¢ƒä¾èµ–

åœ¨å®¡æŸ¥å‰ï¼Œå…ˆç¡®è®¤ä»¥ä¸‹ä¾èµ–æ˜¯å¦æ»¡è¶³ï¼š

| ä¾èµ–é¡¹ | æ£€æŸ¥æ–¹æ³• | çŠ¶æ€ |
|-------|---------|------|
| ç§å­æ•°æ® | æŸ¥çœ‹ `packages/db/seed.ts` æ˜¯å¦åŒ…å« MES æ•°æ® | |
| è§’è‰²æƒé™ | æŸ¥çœ‹ `packages/db/src/permissions/preset-roles.ts` è§’è‰²æ˜¯å¦å®Œæ•´ | |
| è·¯ç”±æ³¨å†Œ | æŸ¥çœ‹ `apps/web/src/routes/_authenticated/mes/` è·¯ç”±æ˜¯å¦å®Œæ•´ | |
| å¯¼èˆªå…¥å£ | æŸ¥çœ‹ sidebar/navigation é…ç½®æ˜¯å¦åŒ…å« MES å…¥å£ | |
| APIå®ç° | æŸ¥çœ‹ `apps/server/src/modules/mes/` å¯¹åº”æœåŠ¡æ˜¯å¦å­˜åœ¨ | |

**æ³¨æ„**ï¼šè‹¥ä¾èµ–ç¼ºå¤±å¯¼è‡´åŠŸèƒ½ä¸å¯ç”¨ï¼Œå½’ç±»ä¸º"æ•°æ®/é…ç½®é—®é¢˜"è€Œé"UXé—®é¢˜"ã€‚

---

## å·²çŸ¥é™åˆ¶ (M2 æœªå®ŒæˆåŠŸèƒ½)

ä»¥ä¸‹åŠŸèƒ½**è®¾è®¡ä¸Šæœªå®ç°**ï¼Œå®¡æŸ¥æ—¶è·³è¿‡ï¼Œä¸ç”Ÿæˆåœºæ™¯ï¼š
- FAI é¦–ä»¶æ£€éªŒæµç¨‹
- Defect å¤„ç½®æµç¨‹ (REWORK/SCRAP/HOLD)
- OQC æŠ½æ£€æµç¨‹
- Run/WO å…³é—­ç¡®è®¤
- æ•°æ®é‡‡é›†è¡¨å•

---

## è§’è‰²åœºæ™¯æ¸…å•

### 2.1 ç”Ÿäº§è®¡åˆ’å‘˜ (planner)

**ä»£ç èŒƒå›´**ï¼š
- é¡µé¢ï¼š`apps/web/src/routes/_authenticated/mes/work-orders.tsx`
- ç»„ä»¶ï¼š`apps/web/src/routes/_authenticated/mes/-components/work-order-*.tsx`
- Hookï¼š`apps/web/src/hooks/use-work-orders.ts`

| # | åœºæ™¯ | å…¥å£ | æ ¸å¿ƒæ£€æŸ¥ç‚¹ |
|---|-----|------|-----------|
| P1 | æ¥æ”¶æ–°å·¥å• | `/mes/work-orders` â†’ æ¥æ”¶æŒ‰é’® | å¯¹è¯æ¡†å­˜åœ¨ã€è·¯ç”±é€‰æ‹©æ–¹å¼ï¼ˆä¸‹æ‹‰/æœç´¢ï¼‰ã€è·¯ç”±çŠ¶æ€å¯è§æ€§ã€åˆ—è¡¨è‡ªåŠ¨åˆ·æ–° |
| P2 | å‘å¸ƒå·¥å• | å·¥å•è¡Œ â†’ Release æ“ä½œ | æŒ‰é’®å­˜åœ¨ä¸”å¯ç”¨ã€æ˜¯å¦å¯é€‰ç›®æ ‡äº§çº¿ã€å‘å¸ƒåçŠ¶æ€æ›´æ–° |
| P3 | åˆ›å»ºæ‰¹æ¬¡ | å·¥å•è¡Œ â†’ åˆ›å»ºæ‰¹æ¬¡ | å…¥å£ä½ç½®ï¼ˆè¡Œå†…/è·³è½¬ï¼‰ã€å¿…å¡«å­—æ®µåˆç†æ€§ã€åˆ›å»ºåè·³è½¬æ‰¹æ¬¡è¯¦æƒ… |
| P4 | å·¥å•çŠ¶æ€ç»´æŠ¤ | å·¥å•è¡Œ â†’ å–æ¶ˆ/é½æ–™æ“ä½œ | å–æ¶ˆå…¥å£å­˜åœ¨ã€é½æ–™å¯¹è¯æ¡†(`PickStatusDialog`)ã€å˜æ›´ååˆ—è¡¨åŒæ­¥ |

### 2.2 äº§çº¿ç»„é•¿ (leader)

**ä»£ç èŒƒå›´**ï¼š
- é¡µé¢ï¼š`apps/web/src/routes/_authenticated/mes/runs/index.tsx`, `$runNo.tsx`
- ç»„ä»¶ï¼š`apps/web/src/routes/_authenticated/mes/-components/run-*.tsx`
- Hookï¼š`apps/web/src/hooks/use-runs.ts`, `use-readiness.ts`

| # | åœºæ™¯ | å…¥å£ | æ ¸å¿ƒæ£€æŸ¥ç‚¹ |
|---|-----|------|-----------|
| L1 | æŸ¥çœ‹å¾…æˆæƒæ‰¹æ¬¡ | `/mes/runs` â†’ ç­›é€‰ PREP | çŠ¶æ€ç­›é€‰å¯ç”¨ã€äº§çº¿ç­›é€‰ï¼ˆæ•°æ®èŒƒå›´ï¼‰ã€åˆ—è¡¨æ˜¾ç¤ºå‡†å¤‡æ£€æŸ¥çŠ¶æ€ |
| L2 | æŸ¥çœ‹å°±ç»ªæ£€æŸ¥è¯¦æƒ… | æ‰¹æ¬¡è¯¦æƒ… â†’ å°±ç»ªæ£€æŸ¥å¡ç‰‡ | å››é¡¹æ£€æŸ¥ç»“æœå¯è§ï¼ˆé’¢ç½‘å°±ç»ª/é”¡è†åˆè§„/ç‰©æ–™å¤‡æ–™/è®¾å¤‡å°±ç»ªï¼‰ã€æ‰‹åŠ¨å½•å…¥å…¥å£å­˜åœ¨ã€AUTO/MANUALæ¥æºæ ‡è¯† |
| L3 | æˆæƒæ‰¹æ¬¡ | æ‰¹æ¬¡è¡Œ â†’ Authorize | æˆæƒå‰å¯è§å‡†å¤‡æ£€æŸ¥ç»“æœã€å¤±è´¥é”™è¯¯ä¿¡æ¯æ¸…æ™°ã€æ˜¯å¦æ”¯æŒæ‰¹é‡æˆæƒ |
| L4 | æŸ¥çœ‹æ‰¹æ¬¡è¿›åº¦ | `/mes/runs/:runNo` | å•ä½ç»Ÿè®¡æ˜¾ç¤ºã€å‡†å¤‡æ£€æŸ¥å¡ç‰‡ã€é¢„æ£€/æ­£å¼æ£€æŸ¥æ“ä½œå…¥å£ |
| L5 | æ’¤é”€æˆæƒ | æ‰¹æ¬¡è¡Œ â†’ Revoke | Revoke æŒ‰é’®å­˜åœ¨ã€æ’¤é”€åçŠ¶æ€æ›´æ–° |
| L6 | å®šä½é—®é¢˜æ‰¹æ¬¡ | `/mes/readiness-exceptions` | å¼‚å¸¸çœ‹æ¿å¯ä½œä¸ºæ—¥å¸¸å…¥å£ã€èƒ½è·³è½¬åˆ°å¯¹åº”æ‰¹æ¬¡ |
| L7 | ä¸Šæ–™é˜²é”™ç¡®è®¤ | æ‰¹æ¬¡è¯¦æƒ… â†’ ä¸Šæ–™é˜²é”™ | ç«™ä½è¡¨åŠ è½½ã€ç‰©æ–™æ‰«ç å…¥å£ã€BOMæ¯”å¯¹ç»“æœæ˜¾ç¤ºã€ç»‘å®šå…³ç³»ç¡®è®¤ã€å¼‚å¸¸æŠ¥è­¦æç¤º |

### 2.3 æ“ä½œå‘˜ (operator)

**ä»£ç èŒƒå›´**ï¼š
- é¡µé¢ï¼š`apps/web/src/routes/_authenticated/mes/execution.tsx`
- Hookï¼š`apps/web/src/hooks/use-station-execution.ts`

| # | åœºæ™¯ | å…¥å£ | æ ¸å¿ƒæ£€æŸ¥ç‚¹ |
|---|-----|------|-----------|
| O1 | é€‰æ‹©å·¥ä½ | `/mes/execution` | é€‰æ‹©æ–¹å¼ï¼ˆä¸‹æ‹‰/è¾“å…¥/è®°å¿†ä¸Šæ¬¡ï¼‰ã€é€‰æ‹©åæ˜¾ç¤ºé˜Ÿåˆ—ã€é˜Ÿåˆ—è‡ªåŠ¨åˆ·æ–°ã€æ˜¯å¦æŒ‰ç»‘å®šå·¥ä½è¿‡æ»¤ |
| O2 | è¿›ç«™ (TrackIn) | æ‰§è¡Œé¡µ TrackIn è¡¨å• | å¿…å¡«å­—æ®µï¼ˆSN/WO/Runï¼‰ã€èƒ½å¦æ‰«ç è‡ªåŠ¨å¡«å……ã€è¿›ç«™å¤±è´¥é”™è¯¯ä¿¡æ¯ |
| O3 | è¿‡ç¨‹æ•°æ®é‡‡é›† | TrackIn å â†’ æ•°æ®é‡‡é›†è¡¨å• | é‡‡é›†ç‚¹æ˜¾ç¤ºã€å¿…å¡«/é€‰å¡«åŒºåˆ†ã€è§„æ ¼ä¸Šä¸‹é™æ ¡éªŒã€è¶…è§„æç¤º |
| O4 | å‡ºç«™ (TrackOut) | æ‰§è¡Œé¡µ TrackOut / é˜Ÿåˆ—å¿«æ·æ“ä½œ | é˜Ÿåˆ—ä¸€é”®å‡ºç«™ã€PASS/FAILé€‰æ‹©ã€FAILåç•Œé¢å¼•å¯¼ `[éœ€çœŸå®ç¯å¢ƒéªŒè¯]` |
| O5 | æ‰‹åŠ¨å½•å…¥æ£€æµ‹ç»“æœ | TrackOut è¡¨å• â†’ æ£€æµ‹ç»“æœåŒº | SPI/AOIæ‰‹åŠ¨å½•å…¥å…¥å£ï¼ˆé™çº§æ¨¡å¼ï¼‰ã€PASS/FAILé€‰æ‹©ã€ä¸è‰¯ä»£ç é€‰æ‹© |
| O6 | æŠ¥å‘Šäº§å“ä¸è‰¯ | TrackOut FAILå â†’ ä¸è‰¯è®°å½•è¡¨å• | ä¸è‰¯ä»£ç é€‰æ‹©ï¼ˆä¸‹æ‹‰/æœç´¢ï¼‰ã€ä½ç½®æ ‡è®°ï¼ˆå¦‚R1,C5ï¼‰ã€æè¿°è¾“å…¥ã€æäº¤ç¡®è®¤ |

### 2.4 å·¥è‰ºå·¥ç¨‹å¸ˆ (engineer)

**ä»£ç èŒƒå›´**ï¼š
- é¡µé¢ï¼š`apps/web/src/routes/_authenticated/mes/routes/index.tsx`, `$routingCode.tsx`, `route-versions.tsx`
- Hookï¼š`apps/web/src/hooks/use-routes.ts`

| # | åœºæ™¯ | å…¥å£ | æ ¸å¿ƒæ£€æŸ¥ç‚¹ |
|---|-----|------|-----------|
| E1 | æŸ¥çœ‹/é…ç½®è·¯ç”± | `/mes/routes` â†’ è¯¦æƒ…é¡µ | åˆ—è¡¨æœç´¢/ç­›é€‰ã€è¯¦æƒ…é¡µç¼–è¾‘æ‰§è¡Œé…ç½®ã€ç«™ç‚¹é€‰æ‹©æ–¹å¼ï¼ˆä¸‹æ‹‰/è¾“å…¥IDï¼‰ |
| E2 | ç¼–è¯‘è·¯ç”±ç‰ˆæœ¬ | è·¯ç”±è¯¦æƒ…é¡µ Compile æŒ‰é’® | ç¼–è¯‘æŒ‰é’®å­˜åœ¨ã€ç¼–è¯‘å¤±è´¥é”™è¯¯å¯è¯»ã€ç‰ˆæœ¬åˆ—è¡¨å¯æŸ¥ |
| E3 | è§¦å‘ERPåŒæ­¥ | `/system/integrations` | æ‰‹åŠ¨è§¦å‘è·¯ç”±åŒæ­¥ã€åŒæ­¥çŠ¶æ€/ç»“æœå¯è§ã€åŒæ­¥åæ–°è·¯ç”±å¯è§ |
| E4 | æŸ¥çœ‹ç‰ˆæœ¬å†å² | `/mes/route-versions` | æŒ‰è·¯ç”±ç¼–ç æŸ¥è¯¢ã€INVALID é”™è¯¯å¯è¯»å¯å®šä½ |
| E5 | é…ç½®é›†æˆæ¥å£ | `/system/integrations` â†’ é›†æˆé…ç½® | é’¢ç½‘/é”¡è†/SPI/AOIæ¥å£é…ç½®å…¥å£ã€è¿æ¥æµ‹è¯•ã€å¯ç”¨/ç¦ç”¨å¼€å…³ã€æ‰‹åŠ¨é™çº§æ¨¡å¼è¯´æ˜ |

### 2.5 è´¨é‡å·¥ç¨‹å¸ˆ (quality)

**ä»£ç èŒƒå›´**ï¼š
- é¡µé¢ï¼š`apps/web/src/routes/_authenticated/mes/readiness-exceptions.tsx`, `trace.tsx`
- Hookï¼š`apps/web/src/hooks/use-readiness.ts`, `use-trace.ts`

| # | åœºæ™¯ | å…¥å£ | æ ¸å¿ƒæ£€æŸ¥ç‚¹ |
|---|-----|------|-----------|
| Q1 | æŸ¥çœ‹å‡†å¤‡å¼‚å¸¸ | `/mes/readiness-exceptions` | å¼‚å¸¸åˆ—è¡¨å­˜åœ¨ã€ç­›é€‰/æ’åºã€è·³è½¬å¯¹åº”æ‰¹æ¬¡ |
| Q2 | è±å…æ£€æŸ¥é¡¹ | æ‰¹æ¬¡è¯¦æƒ…é¡µ â†’ æ£€æŸ¥é¡¹ â†’ Waive | Waive æŒ‰é’®å­˜åœ¨ã€å½•å…¥è±å…åŸå› ã€è±å…åçŠ¶æ€æ›´æ–° |
| Q3 | è¿½æº¯æŸ¥è¯¢ | `/mes/trace` | SN æœç´¢å¯ç”¨ã€ç»“æœä¿¡æ¯å®Œæ•´ï¼ˆè·¯ç”±/æ•°æ®/ç¼ºé™·/ç‰©æ–™ï¼‰ã€è·³è½¬ç›¸å…³æ‰¹æ¬¡/å·¥å• |

---

## è·¨è§’è‰²åä½œæ£€æŸ¥

| # | æ£€æŸ¥ç‚¹ | éªŒè¯æ–¹æ³• |
|---|-------|---------|
| X1 | è®¡åˆ’å‘˜åˆ›å»ºæ‰¹æ¬¡åç»„é•¿èƒ½å¦ç«‹å³çœ‹åˆ° | æŸ¥çœ‹ runs åˆ—è¡¨ hook æ˜¯å¦æœ‰åˆ·æ–°/è½®è¯¢é€»è¾‘ |
| X2 | å‡†å¤‡æ£€æŸ¥çŠ¶æ€åœ¨æ‰¹æ¬¡åˆ—è¡¨æ˜¯å¦å¯è§ | æŸ¥çœ‹ runs columns å®šä¹‰æ˜¯å¦åŒ…å« readiness å­—æ®µ |
| X3 | çŠ¶æ€æµè½¬è¿ç»­æ€§ | WO RECEIVEDâ†’RELEASEDâ†’Run PREPâ†’AUTHORIZEDâ†’IN_PROGRESSâ†’(OQC fail)ON_HOLDâ†’MRBâ†’COMPLETED/CLOSED_REWORK/SCRAPPED æ˜¯å¦æœ‰UIå…¥å£ |
| X4 | çŠ¶æ€å˜æ›´ååˆ—è¡¨åˆ·æ–° | å„ mutation æˆåŠŸåæ˜¯å¦è°ƒç”¨ invalidateQueries |
| X5 | å•ä»¶çŠ¶æ€æµè½¬å®Œæ•´æ€§ | Unit IN_STATIONâ†’QUEUED/OUT_FAILED/DONE/ON_HOLD/SCRAPPED å„çŠ¶æ€æ˜¯å¦æœ‰UIå±•ç¤º |
| X6 | æ‰‹åŠ¨é™çº§æ¨¡å¼å¯ç”¨æ€§ | å¤–éƒ¨ç³»ç»Ÿæœªå°±ç»ªæ—¶ï¼Œæ‰‹åŠ¨å½•å…¥å…¥å£æ˜¯å¦å¯è§ï¼ˆå°±ç»ªæ£€æŸ¥/æ£€æµ‹ç»“æœï¼‰ |
| X7 | æ•°æ®æ¥æºå®¡è®¡æ ‡è¯† | AUTO/MANUAL æ¥æºæ ‡è¯†åœ¨è¿½æº¯æŸ¥è¯¢ä¸­æ˜¯å¦å¯è§ |

---

## è¾“å‡ºæ ¼å¼

### 1. æ•°æ®/ç¯å¢ƒä¾èµ–æ£€æŸ¥ç»“æœ

| ä¾èµ–é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|-------|------|------|
| ç§å­æ•°æ® | âœ…/âŒ | ... |
| è§’è‰²æƒé™ | âœ…/âŒ | ... |
| è·¯ç”±æ³¨å†Œ | âœ…/âŒ | ... |
| å¯¼èˆªå…¥å£ | âœ…/âŒ | ... |
| APIå®ç° | âœ…/âŒ | ... |

### 2. è§’è‰²åœºæ™¯å®¡æŸ¥ç»“æœ

> æ¯å®Œæˆä¸€ä¸ªè§’è‰²è¾“å‡ºä¸€æ¬¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

#### ç”Ÿäº§è®¡åˆ’å‘˜ (planner)

| åœºæ™¯ | ç»“æœ | é—®é¢˜ | ä»£ç ä½ç½® | ä¸¥é‡æ€§ |
|-----|------|------|---------|--------|
| P1: æ¥æ”¶å·¥å• | âœ… | - | - | - |
| P2: å‘å¸ƒå·¥å• | âš ï¸ | æ— æ³•é€‰æ‹©ç›®æ ‡äº§çº¿ | `work-orders.tsx:L89` | ğŸŸ¡ |
| P3: åˆ›å»ºæ‰¹æ¬¡ | âœ… | - | - | - |
| P4: å·¥å•çŠ¶æ€ç»´æŠ¤ | âŒ | å–æ¶ˆå…¥å£ä¸å­˜åœ¨ | `work-order-columns.tsx` | ğŸ”´ |

*(æ¯ä¸ªè§’è‰²ä¸€ä¸ªè¡¨æ ¼ï¼Œå®Œæˆåå†è¿›å…¥ä¸‹ä¸€è§’è‰²)*

### 3. é—®é¢˜æ±‡æ€»

#### ğŸ”´ é˜»æ–­æ€§é—®é¢˜

| # | è§’è‰² | åœºæ™¯ | é—®é¢˜ | ä»£ç ä½ç½® | å»ºè®®æ–¹æ¡ˆ |
|---|-----|------|-----|---------|---------|
| 1 | planner | P4 | å–æ¶ˆå·¥å•å…¥å£ä¸å­˜åœ¨ | `work-order-columns.tsx` | åœ¨è¡Œæ“ä½œèœå•å¢åŠ  Cancel æŒ‰é’® |

#### ğŸŸ¡ æ•ˆç‡é—®é¢˜

| # | è§’è‰² | åœºæ™¯ | é—®é¢˜ | ä»£ç ä½ç½® | å»ºè®®æ–¹æ¡ˆ |
|---|-----|------|-----|---------|---------|
| 1 | planner | P2 | æ— æ³•é€‰æ‹©ç›®æ ‡äº§çº¿ | `work-orders.tsx:L89` | Release æ—¶å¢åŠ äº§çº¿é€‰æ‹© |

#### ğŸŸ¢ ä½“éªŒé—®é¢˜

*(åŒä¸Šæ ¼å¼)*

### 4. ç¼ºå¤±åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | å½±å“è§’è‰² | ä»£ç ç°çŠ¶ | ä¼˜å…ˆçº§ |
|-----|---------|---------|--------|
| æ‰¹é‡æˆæƒ | leader | æ— å…¥å£ | P1 |
| æ‰«ç è‡ªåŠ¨å¡«å…… | operator | æ— å®ç° | P1 |

### 5. éœ€çœŸå®ç¯å¢ƒéªŒè¯é¡¹

| åœºæ™¯ | éªŒè¯ç‚¹ | åŸå›  |
|-----|-------|------|
| O3 | FAILåç•Œé¢å¼•å¯¼ | æ¶‰åŠè¿è¡Œæ—¶çŠ¶æ€æµè½¬ |

### 6. ä¸‹ä¸€æ­¥å»ºè®®

æŒ‰ä¼˜å…ˆçº§åˆ—å‡º Top 5 æ”¹è¿›é¡¹ï¼š

1. **[P0] é—®é¢˜æè¿°**
   - å½±å“èŒƒå›´ï¼š...
   - å»ºè®®æ–¹å‘ï¼š...
   - æ¶‰åŠæ–‡ä»¶ï¼š...

2. **[P1] ...**

---

## å®¡æŸ¥èŒƒå›´é€ŸæŸ¥

```
apps/web/src/routes/_authenticated/mes/
â”œâ”€â”€ work-orders.tsx          # å·¥å•ç®¡ç†
â”œâ”€â”€ runs/
â”‚   â”œâ”€â”€ index.tsx            # æ‰¹æ¬¡åˆ—è¡¨
â”‚   â””â”€â”€ $runNo.tsx           # æ‰¹æ¬¡è¯¦æƒ…ï¼ˆå«å°±ç»ªæ£€æŸ¥ã€ä¸Šæ–™é˜²é”™ï¼‰
â”œâ”€â”€ execution.tsx            # å·¥ä½æ‰§è¡Œï¼ˆTrackIn/Outã€æ•°æ®é‡‡é›†ã€ä¸è‰¯è®°å½•ï¼‰
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ index.tsx            # è·¯ç”±åˆ—è¡¨
â”‚   â””â”€â”€ $routingCode.tsx     # è·¯ç”±è¯¦æƒ…
â”œâ”€â”€ route-versions.tsx       # è·¯ç”±ç‰ˆæœ¬
â”œâ”€â”€ trace.tsx                # è¿½æº¯æŸ¥è¯¢ï¼ˆå«æ•°æ®æ¥æºæ ‡è¯†ï¼‰
â”œâ”€â”€ readiness-exceptions.tsx # å‡†å¤‡å¼‚å¸¸
â”œâ”€â”€ loading-verify.tsx       # ä¸Šæ–™é˜²é”™ (å¦‚ç‹¬ç«‹é¡µé¢)
â””â”€â”€ -components/             # å…±äº«ç»„ä»¶

apps/web/src/hooks/
â”œâ”€â”€ use-work-orders.ts
â”œâ”€â”€ use-runs.ts
â”œâ”€â”€ use-station-execution.ts
â”œâ”€â”€ use-trace.ts
â”œâ”€â”€ use-readiness.ts
â”œâ”€â”€ use-routes.ts
â””â”€â”€ use-loading-verify.ts    # ä¸Šæ–™é˜²é”™

apps/server/src/modules/mes/
â”œâ”€â”€ work-order/
â”œâ”€â”€ run/
â”œâ”€â”€ execution/
â”œâ”€â”€ routing/
â”œâ”€â”€ readiness/
â”œâ”€â”€ trace/
â”œâ”€â”€ loading/                 # ä¸Šæ–™é˜²é”™
â”œâ”€â”€ defect/                  # ä¸è‰¯è®°å½•
â””â”€â”€ integration/             # é›†æˆæ¥å£ï¼ˆé’¢ç½‘/é”¡è†/SPI/AOIï¼‰
```
