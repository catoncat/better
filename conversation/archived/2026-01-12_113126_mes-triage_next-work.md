# mes-triage_next-work

## Context
- Generated by `bun scripts/workflow-run.ts agent_workflows/mes-triage.json`
- Plan source: `domain_docs/mes/plan/phase3_tasks.md`

## Decisions
- (none yet; waiting for selection)

## Plan
MES triage (deterministic)

Plan: `domain_docs/mes/plan/phase3_tasks.md`

Git Status:
```
## main...origin/main
 M .claude/skills/mes-triage/SKILL.md
 M domain_docs/mes/CONTEXT.md
 M domain_docs/mes/plan/phase3_tasks.md
 M package.json
?? agent_docs/01_core/workflow_control_plane.md
?? agent_workflows/
?? conversation/2026-01-12_111418_mes-triage_next-work.md
?? conversation/2026-01-12_111924_3.5.2_data-collection-spec_web_plan.md
?? conversation/2026-01-12_113053_workflow_control_plane_mvp.md
?? scripts/mes-triage-note.ts
?? scripts/mes-triage-render.ts
?? scripts/workflow-run.ts
```

Worktree Scan:
```
# Worktree Scan

Current: /Users/envvar/lzb/better (main)

In-flight worktrees:
- /Users/envvar/lzb/better-3.5.2 (feat/3.5.2-dc-spec-web) [dirty, ahead 1]
  - touch: db, server
  - last: feat(mes): add Operation list/create/update API
  - files (6): apps/server/src/modules/mes/operation/routes.ts, apps/server/src/modules/mes/operation/schema.ts, apps/server/src/modules/mes/operation/service.ts, apps/server/src/modules/mes/routes.ts, packages/db/src/permissions/permissions.ts, packages/db/src/permissions/preset-roles.ts
- /Users/envvar/lzb/better-wt-m3-e2e-seed-hardening (m3-e2e-seed-hardening) [dirty, behind 48]
  - touch: server
  - last: docs(mes): update CONTEXT.md to reflect M3 as current phase
  - files (2): apps/server/scripts/seed-mes.ts, apps/server/scripts/seed.ts
```

- Track E: Data Collection 配置（P0）
  - Candidates:
    - `3.5.3` Web: 路由配置绑定体验升级（替换 `dataSpecIdsText` 手填）: why now P0/M3 backlog; depends on 3.5.2 (or a selector backed by 3.5.1 API); touch points `apps/server/src/modules/mes/routing/service.ts`, `apps/web/src/routes/_authenticated/mes/routes/$routingCode.tsx`
    - `3.5.4` Execution: 手工数据采集入口补齐（TrackOut 时录入）: why now P0/M3 backlog; depends on 3.5.3 binding + server validation; touch points `apps/server/src/modules/mes/execution/schema.ts`, `apps/web/src/routes/_authenticated/mes/execution.tsx`
- Track C: Ops & Deployment Readiness（P0）
  - Candidates:
    - `3.3.3` 观测与审计最低配置（上线可运维）: why now P0/M3 backlog; depends on plan ordering; touch points `agent_docs/05_ops/observability_jaeger.md`, `apps/server/src/modules/audit/*`, `apps/web/src/routes/_authenticated/system/*`
    - `3.3.1` 单体部署清单化：构建、运行、TLS、端口、Web 模式、DB 路径: why now P0/M3 backlog; depends on plan ordering; touch points `agent_docs/05_ops/single_binary_deployment.md`, `README.md`
- Track A: Docs & Contract Alignment（P0）
  - Candidates:
    - `3.1.3` 清理过期差距报告与重复规范（避免团队误判进度）: why now P0/M3 backlog; depends on plan ordering; touch points `domain_docs/mes/plan/*`, `issues/`
- Conflicts:
  - Track E blocks Track C: shared touch points `server`, `web`

Pick one; I will confirm scope and start plan-first implementation.

Context:
- Total tasks parsed: 20

## Open Questions
- Pick one candidate; then we switch to `mes-implement` and land code slice-by-slice.

## References
- `domain_docs/mes/plan/phase3_tasks.md`
- `scripts/mes-triage-render.ts`
- `scripts/workflow-run.ts`
- `agent_workflows/mes-triage.json`
