# MES 产品交互 Review 方法（Meta）

> 目标：以“业务闭环”为第一优先级，系统性梳理 MES 前端的交互与信息架构问题，并沉淀为可追踪、可执行的轮次产出（roundN）。

---

## 1. 评审优先级（裁决顺序）

1) **业务逻辑通顺**  
2) **功能规划合理**（信息架构/入口/职责边界）  
3) **UX**（可用性/效率/反馈/容错）  
4) **UI**（一致性/视觉/组件规范）  

> 规则：上层没过关，不进入下一层“打磨”。例如：流程卡死时不做 UI 微调。

---

## 2. Review 的最小单元

### 2.1 交互步骤（Interaction Step）

一个可复现的“用户意图 → 用户动作 → 系统反馈”的闭环片段，必须能映射：
- UI（页面/组件/路由/按钮/表单）
- API（endpoint + 关键字段/约束）
- 状态/数据变化（Run/WO/Unit/Inspection/Loading…）
- 权限门禁（Permission / Can / enabled gating）

### 2.2 页面（Page）

页面是承载多个交互步骤的容器，重点评审：
- 信息架构：入口、分组、导航、信息密度
- 关键任务路径：默认路径是否最短、最清晰
- 异常/空态/权限不足时是否可理解且可恢复

---

## 3. 证据与记录规范

每条结论必须带证据（至少两项）：
- 文档：`domain_docs/mes/spec/**`、`domain_docs/mes/*_playbook/**`、`user_docs/**`
- API：`domain_docs/mes/tech/api/**`（或实际 routes/service 文件路径）
- UI：`apps/web/src/routes/_authenticated/mes/**`（必要时补充 hooks/components）
- 权限：`domain_docs/mes/permission_audit.md`

记录方式：
- 在 `roundN_*.md` 的交互矩阵里直接贴路径/endpoint（可点击）
- 重要偏差在“问题清单”里写复现步骤与期望/现状

---

## 4. 问题分类（建议统一口径）

### 4.1 业务逻辑通顺（优先级最高）
- 状态机/门禁不一致（不该出现的操作可点、该出现的操作不可点）
- 流程断点（缺入口/缺下一步/缺回退路径）
- 多页面对同一实体状态解释不一致
- 关键异常不可恢复（只报错、不告诉用户怎么继续）

### 4.2 功能规划合理
- 功能重复/入口分散（同类能力多个页面散落）
- 模块边界模糊（配置与执行混在一个页面）
- 用户角色任务不匹配（operator 看到大量 planner/engineer 配置入口）

### 4.3 UX
- 缺少关键反馈（加载/提交/成功/失败/校验）
- 空态不可理解（不知道下一步做什么）
- 错误提示不具备可执行性（缺原因/缺建议/缺定位信息）
- 表单/列表效率低（缺搜索/过滤/默认排序不合理）

### 4.4 UI
- 组件使用不统一、排版不一致、信息层级不清
- 颜色/Badge/文案风格不统一

---

## 5. 严重级别（P0/P1/P2）

- **P0**：主线无法闭环、误操作高风险、权限错误导致越权/阻断
- **P1**：主线能跑但成本高/易出错，或关键异常路径体验差
- **P2**：一致性/效率/美观问题，不影响完成任务

---

## 6. 轮次建议（不锁死，仅推荐）

- 轮次1：核心执行闭环（Work Orders → Runs → Readiness → Loading → FAI → Execution → Closeout/OQC → Trace）
- 轮次2：配置与信息架构（Routes/Versions、Readiness/Loading config、Line/Station 等）
- 轮次3：集成与辅助模块（Integration、Device Data、各类记录与看板）

