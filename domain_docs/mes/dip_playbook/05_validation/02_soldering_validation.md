# 焊接验证清单

## 1. 概述
本文档提供 DIP 产线焊接工序（波峰焊 + 后焊）的验证清单，用于验收测试和功能验证。

## 2. 波峰焊配置验证

### 2.1 工位配置
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 波峰焊工位存在 | 查询工位列表 | 工位 DIP-A-WS-01 存在 | | ☐ |
| 工位类型正确 | 检查工位类型 | stationType = WAVE | | ☐ |
| 工位顺序正确 | 检查工位顺序 | 在插件后，后焊前 | | ☐ |

### 2.2 夹具配置
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 波峰焊治具存在 | 查询夹具列表 | 治具 WS-JIG-* 存在 | | ☐ |
| 夹具类型正确 | 检查类型 | type = WAVE_JIG | | ☐ |
| 产品关联正确 | 检查 productId | 关联正确产品 | | ☐ |
| 寿命配置正确 | 检查 maxLife | 有合理的寿命值 | | ☐ |

## 3. 波峰焊执行验证

### 3.1 夹具分配
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 夹具可分配 | 分配到批次 | 分配成功 | | ☐ |
| 分配记录创建 | 查询分配记录 | 记录存在 | | ☐ |
| 重复分配拒绝 | 再次分配 | 提示已分配 | | ☐ |
| 产品不匹配拒绝 | 分配错误产品夹具 | 拒绝分配 | | ☐ |

### 3.2 夹具寿命验证
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 正常寿命允许使用 | 分配正常夹具 | 允许分配 | | ☐ |
| 寿命预警提示 | 分配接近寿命夹具 | 显示预警 | | ☐ |
| 寿命超限禁止 | 分配超限夹具 | 禁止分配 | | ☐ |

### 3.3 波峰焊执行
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| TrackIn 成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 夹具使用记录 | 检查使用记录 | 记录使用次数 | | ☐ |
| TrackOut PASS | 正常出站 | 创建 PASS 记录 | | ☐ |
| TrackOut FAIL | 不良出站 | 创建 FAIL 记录 | | ☐ |
| 寿命累加 | 检查夹具寿命 | currentLife +1 | | ☐ |

## 4. 波峰焊不良验证

### 4.1 不良类型
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 虚焊登记 | 选择 WS_COLD | 创建不良记录 | | ☐ |
| 透锡不足登记 | 选择 WS_INSUF | 创建不良记录 | | ☐ |
| 短路登记 | 选择 WS_SHORT | 创建不良记录 | | ☐ |
| 拉尖登记 | 选择 WS_ICICLE | 创建不良记录 | | ☐ |

### 4.2 焊接返修
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 返修任务创建 | 处置为返修 | 创建返修任务 | | ☐ |
| 重过波峰焊 | 返修后重进站 | 允许重新执行 | | ☐ |
| 手工补焊 | 流转到手工焊接 | 继续后焊流程 | | ☐ |

## 5. 后焊工位配置验证

### 5.1 工位配置
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 手工焊接工位存在 | 查询工位 | DIP-A-HS-01 存在 | | ☐ |
| 剪脚工位存在 | 查询工位 | DIP-A-TL-01 存在 | | ☐ |
| 三防漆工位存在 | 查询工位 | DIP-A-CC-01 存在 | | ☐ |
| 固化工位存在 | 查询工位 | DIP-A-CU-01 存在 | | ☐ |
| 外观检验工位存在 | 查询工位 | DIP-A-VI-01 存在 | | ☐ |
| 工位类型正确 | 检查类型 | POST_SOLDER/INSPECTION | | ☐ |
| 工位顺序正确 | 检查顺序 | 按流程顺序 | | ☐ |

## 6. 后焊执行验证

### 6.1 手工焊接
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 进站成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 出站 PASS | 正常完成 | 创建 PASS 记录 | | ☐ |
| 虚焊不良 | 登记 HS_COLD | 创建不良记录 | | ☐ |

### 6.2 剪脚处理
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 进站成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 出站 PASS | 正常完成 | 创建 PASS 记录 | | ☐ |
| 剪脚问题 | 登记不良 | 创建不良记录 | | ☐ |

### 6.3 三防漆喷涂
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 进站成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 出站 PASS | 正常完成 | 创建 PASS 记录 | | ☐ |
| 漏喷不良 | 登记 CC_MISS | 创建不良记录 | | ☐ |
| 气泡不良 | 登记 CC_BUBBLE | 创建不良记录 | | ☐ |

### 6.4 固化处理
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 进站成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 出站 PASS | 正常完成 | 创建 PASS 记录 | | ☐ |

### 6.5 外观检验
| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 进站成功 | 扫码进站 | 创建进站记录 | | ☐ |
| 检验 PASS | 合格出站 | 创建 PASS 记录 | | ☐ |
| 检验 FAIL | 不良出站 | 创建 FAIL 记录 | | ☐ |
| 外观不良登记 | 登记 VI_* | 创建不良记录 | | ☐ |

## 7. 后焊段首件（IPQC）验证

| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 段首件提示 | 进入后焊段 | 提示段首件检查 | | ☐ |
| 段首件记录 | 完成检查 | 创建 IPQC 记录 | | ☐ |
| 检查项完整 | 查看检查项 | 包含焊接/剪脚/喷涂检查 | | ☐ |

## 8. 后焊返修验证

| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 手工焊接返修 | 处置为返修 | 创建返修任务 | | ☐ |
| 三防漆返修 | 清洗重喷 | 返修记录 | | ☐ |
| 返修后复检 | 提交复检 | 复检结果记录 | | ☐ |

## 9. 夹具使用追溯

| 验证项 | 验证方法 | 预期结果 | 实际结果 | 状态 |
|--------|----------|----------|----------|------|
| 夹具使用记录 | 查询使用记录 | 每次使用都记录 | | ☐ |
| 按批次查询 | 按 Run 筛选 | 显示该批次使用 | | ☐ |
| 按夹具查询 | 按夹具筛选 | 显示该夹具历史 | | ☐ |
| 寿命统计正确 | 对比使用记录 | 寿命数与记录数一致 | | ☐ |

## 10. API 验证

### 10.1 夹具 API
```
POST /api/tooling/:id/assign
POST /api/tooling/:id/usage

验证:
- [ ] 分配 API 返回 200
- [ ] 使用记录 API 返回 200
- [ ] 寿命超限返回 403
```

### 10.2 执行 API
```
POST /api/stations/:stationCode/track-in
POST /api/stations/:stationCode/track-out

验证:
- [ ] 波峰焊工位正常
- [ ] 后焊工位正常
- [ ] 检验工位正常
```
