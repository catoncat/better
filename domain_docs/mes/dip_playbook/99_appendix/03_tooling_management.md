# 工装夹具管理说明

## 1. 概述
工装夹具是 DIP 产线的重要生产资源，需要进行有效的管理和追踪。本文档描述工装夹具管理的规则和流程。

## 2. 夹具分类

### 2.1 按用途分类
| 类型 | 代码 | 说明 | 典型寿命 |
|------|------|------|----------|
| 波峰焊治具 | WAVE_JIG | 固定 PCB 通过波峰焊 | 3000-5000 次 |
| ICT 测试夹具 | ICT_JIG | ICT 测试用探针夹具 | 8000-10000 次 |
| FCT 测试夹具 | FCT_JIG | FCT 功能测试夹具 | 8000-10000 次 |
| 插件治具 | INSERT_JIG | 辅助手工插件 | 10000+ 次 |
| 喷涂治具 | COATING_JIG | 三防漆喷涂保护 | 5000-8000 次 |

### 2.2 按通用性分类
| 类型 | 说明 | 管理方式 |
|------|------|----------|
| 专用夹具 | 特定产品专用 | 按产品管理 |
| 通用夹具 | 多产品共用 | 按功能管理 |

## 3. 夹具生命周期

```
采购/制作
    ↓
入库登记
    ↓
首次验证
    ↓
投入使用
    ↓
┌─────────────────────────────────────┐
│           正常使用循环               │
│                                     │
│  分配到批次 → 使用 → 解除分配        │
│       ↑                   │         │
│       └───────────────────┘         │
│                                     │
│  [预警] 达到 80% 寿命               │
│  [停用] 达到 100% 寿命              │
└─────────────────────────────────────┘
    ↓
定期/异常维护
    ↓
维护后验证
    ↓
继续使用 / 报废
```

## 4. 夹具寿命管理

### 4.1 寿命定义
| 指标 | 说明 |
|------|------|
| maxLife | 设计寿命（使用次数上限） |
| currentLife | 当前累计使用次数 |
| remainingLife | 剩余寿命 = maxLife - currentLife |
| lifePercentage | 使用率 = currentLife / maxLife × 100% |

### 4.2 寿命阈值
| 阈值 | 百分比 | 处理方式 |
|------|--------|----------|
| 正常 | < 80% | 正常使用 |
| 预警 | 80% - 100% | 显示预警，可继续使用 |
| 超限 | ≥ 100% | 禁止使用，需维护或更换 |

### 4.3 寿命计算规则
- 每次使用增加 1 次计数
- 维护后可选择重置寿命
- 报废后不再计数

## 5. 夹具分配规则

### 5.1 分配条件
| 条件 | 要求 |
|------|------|
| 状态 | 夹具状态为 ACTIVE |
| 寿命 | 未超过设计寿命 |
| 产品匹配 | 专用夹具需匹配产品 |
| 可用性 | 未被其他批次占用 |

### 5.2 分配流程
```
1. 选择待分配批次
2. 选择适用夹具
3. 系统验证分配条件
   - 状态检查
   - 寿命检查
   - 产品匹配检查
4. 分配成功/失败
5. 记录分配日志
```

### 5.3 解除分配
```
1. 批次完成或取消
2. 手动解除分配
3. 系统自动解除（可配置）
```

## 6. 夹具使用记录

### 6.1 使用记录内容
| 字段 | 说明 |
|------|------|
| toolingId | 夹具 ID |
| runId | 批次 ID |
| unitId | 单件 ID（可选） |
| stationId | 使用工位 |
| usedAt | 使用时间 |
| usageCount | 使用次数增量 |
| operatorId | 操作员 |

### 6.2 使用计数时机
| 场景 | 计数方式 |
|------|----------|
| 波峰焊 | 每块 PCB 过焊计 1 次 |
| ICT 测试 | 每次测试计 1 次 |
| FCT 测试 | 每次测试计 1 次 |

## 7. 夹具维护（TPM）

### 7.1 维护类型
| 类型 | 触发条件 | 说明 |
|------|----------|------|
| 日常保养 | 每班/每日 | 清洁、检查 |
| 定期维护 | 按周期 | 更换易损件 |
| 预防维护 | 达到寿命预警 | 全面检查维护 |
| 故障维修 | 异常发生 | 修复问题 |

### 7.2 维护流程
```
1. 停止使用夹具
2. 夹具状态 → MAINTENANCE
3. 执行维护操作
4. 记录维护内容
5. 决定是否重置寿命
6. 验证夹具功能
7. 夹具状态 → ACTIVE
```

### 7.3 维护记录
| 字段 | 说明 |
|------|------|
| toolingId | 夹具 ID |
| maintenanceType | 维护类型 |
| performedAt | 维护时间 |
| performedBy | 维护人员 |
| notes | 维护说明 |
| partsReplaced | 更换的零件 |
| resetLife | 是否重置寿命 |
| newLifeValue | 重置后的寿命值 |

## 8. 夹具报废

### 8.1 报废条件
- 无法修复的损坏
- 维护成本过高
- 产品停产不再需要
- 技术更新换代

### 8.2 报废流程
```
1. 申请报废
2. 审批
3. 夹具状态 → SCRAPPED
4. 记录报废原因
5. 实物处理
```

## 9. 夹具追溯

### 9.1 正向追溯
从夹具追溯到产品：
```
夹具 → 使用记录 → 批次 → 单件
```

用途：
- 夹具异常时排查影响范围
- 夹具寿命分析

### 9.2 反向追溯
从产品追溯到夹具：
```
单件 → 批次 → 分配记录 → 夹具
```

用途：
- 产品质量问题追溯
- 生产条件追溯

## 10. 夹具预警

### 10.1 预警类型
| 预警 | 触发条件 | 处理建议 |
|------|----------|----------|
| 寿命预警 | 达到 80% 寿命 | 准备备用夹具 |
| 寿命超限 | 达到 100% 寿命 | 停止使用，维护或更换 |
| 维护到期 | 定期维护周期到达 | 安排维护 |
| 校准到期 | 测试夹具校准到期 | 重新校准 |

### 10.2 预警通知
- 系统内提醒
- 邮件通知（可配置）
- 在分配时显示警告

## 11. 夹具管理最佳实践

### 11.1 编码规范
```
{类型}-{产品代码/COMM}-{序号}

示例：
- WS-JIG-PRDA-001  = 产品 A 波峰焊治具 001
- ICT-JIG-COMM-001 = 通用 ICT 夹具 001
```

### 11.2 标签管理
- 每个夹具贴有唯一条码
- 条码对应系统中的夹具编码
- 支持扫码快速识别

### 11.3 存放管理
- 专用存放区域
- 按类型/产品分区
- 定期盘点

### 11.4 备用管理
- 关键夹具保持备用
- 备用夹具定期验证
- 明确备用夹具位置

## 12. 数据报表

### 12.1 夹具使用报表
- 使用频率统计
- 寿命消耗趋势
- 按产品/产线统计

### 12.2 夹具维护报表
- 维护记录汇总
- 维护成本统计
- 维护效果分析

### 12.3 夹具异常报表
- 异常原因分析
- 影响范围统计
- 改进措施追踪
