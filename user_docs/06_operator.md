# 操作员 (Operator) 操作指南

## 角色概述

操作员负责在工位上执行产品的进站和出站操作，是生产执行的第一线人员。

| 属性 | 值 |
|------|-----|
| 角色代码 | `operator` |
| 数据范围 | 分配的工位 (ASSIGNED_STATIONS) |
| 默认首页 | `/mes/execution` |

## 权限清单

### 工位执行
- ✓ 进站操作 (`exec:track_in`)
- ✓ 出站操作 (`exec:track_out`)

### 其他
- ✓ 追溯查询 (`trace:read`) — 仅限查看自己经手的产品

## 可访问菜单

```
生产执行
├── 工位执行      /mes/execution       [进站/出站操作]
└── 追溯查询      /mes/trace           [只读]

通知中心          /notifications
```

> **注意**: 操作员只能在其绑定的工位上执行操作，且只能看到该工位相关的数据。

---

## 核心功能操作

### 1. 工位执行界面

#### 1.1 登录工位
1. 登录系统后自动进入工位执行页面
2. 如绑定多个工位，选择当前工作工位
3. 查看工位状态：
   - 当前在制产品
   - 等待队列
   - 今日统计

#### 1.2 界面布局
```
┌─────────────────────────────────────────────┐
│  工位名称: XX组装工位                        │
│  当前批次: BATCH-2024-001                   │
├─────────────────────────────────────────────┤
│                                             │
│  [扫描区域]                                 │
│  请扫描产品序列号进行进站                     │
│  ┌─────────────────────────────────────┐   │
│  │                                     │   │
│  └─────────────────────────────────────┘   │
│                                             │
├─────────────────────────────────────────────┤
│  当前在制: SN-001234567                      │
│  进站时间: 09:15:32                          │
│  [查看SOP] [数据采集] [出站]                 │
├─────────────────────────────────────────────┤
│  今日统计: 已完成 45 | 在制 1 | 目标 100     │
└─────────────────────────────────────────────┘
```

---

### 2. 进站操作 (Track-In)

#### 2.1 扫码进站
1. 将产品放置在工位上
2. 使用扫码枪扫描产品序列号
3. 系统自动验证：
   - 产品是否存在
   - 是否属于已授权批次
   - 是否应进入当前工位
   - 前置工序是否完成
4. 验证通过后自动进站

#### 2.2 手动输入进站
如扫码枪故障：
1. 点击 **手动输入**
2. 输入产品序列号
3. 点击 **确认进站**

#### 2.3 进站异常处理

| 异常情况 | 系统提示 | 处理方式 |
|----------|----------|----------|
| 序列号不存在 | "产品不存在" | 检查序列号是否正确 |
| 批次未授权 | "批次未授权生产" | 联系组长确认 |
| 工序不匹配 | "产品应进入XXX工位" | 将产品送至正确工位 |
| 前工序未完成 | "前置工序未完成" | 检查产品流转顺序 |
| 已在其他工位 | "产品正在XXX工位" | 联系相关工位操作员 |

---

### 3. 作业执行

#### 3.1 查看作业指导书 (SOP)
1. 进站后点击 **查看SOP**
2. 按步骤执行作业
3. 查看注意事项和质量要点

#### 3.2 数据采集
如工序配置了数据采集点：
1. 完成作业后点击 **数据采集**
2. 按提示录入数据：
   - 数值型：输入测量值
   - 选项型：选择对应选项
   - 文本型：输入描述
3. 系统自动检验规格：
   - 绿色 ✓：在规格范围内
   - 红色 ✗：超出规格范围
4. 如数据超规，按提示处理

---

### 4. 出站操作 (Track-Out)

#### 4.1 正常出站
1. 完成作业和数据采集
2. 点击 **出站** 按钮
3. 选择出站结果：
   - **PASS**: 产品合格，流转下一工序
   - **FAIL**: 产品不合格，进入不良处理
4. 确认出站
5. 将产品移至下一工位或暂存区

#### 4.2 出站验证
系统自动检查：
- 必填数据是否完整
- 数据是否在规格范围内
- 是否满足出站条件

#### 4.3 不良产品出站
如产品检测不合格：
1. 选择 **FAIL** 出站
2. 记录不良信息：
   - 选择不良代码（下拉列表）
   - 标记不良位置（如 R1, C5）
   - 填写描述（可选）
3. 确认提交
4. 产品进入不良处置流程

> 不良产品将等待质量工程师判定处置方式（返修/报废/隔离）。

---

### 5. 手动录入检测结果（降级模式）

当 SPI/AOI 等自动检测设备未与系统集成时，需手动录入检测结果。

#### 5.1 何时需要手动录入
- SPI 设备未联网
- AOI 数据采集系统故障
- 使用离线检测设备

#### 5.2 操作步骤
1. 完成工序作业后，点击 **检测结果录入**
2. 选择检测类型：SPI / AOI / X-RAY / 其他
3. 选择检测结果：PASS / FAIL
4. 如 FAIL，记录不良信息：
   - 不良代码
   - 不良位置
   - 描述
5. 确认提交

> **注意**: 手动录入的数据会标记 `source: MANUAL`，便于审计追溯。

---

### 6. 单件状态说明

产品在生产过程中会经历不同状态：

| 状态 | 英文代码 | 说明 |
|------|----------|------|
| **在站中** | `IN_STATION` | 产品已进站，正在当前工位加工 |
| **排队中** | `QUEUED` | 产品已出站(PASS)，等待进入下一工位 |
| **出站失败** | `OUT_FAILED` | 产品出站时检测不合格 |
| **已完成** | `DONE` | 产品已完成所有工序 |
| **隔离中** | `ON_HOLD` | 产品被隔离，等待 MRB 评审 |
| **已报废** | `SCRAPPED` | 产品已报废处理 |

#### 状态流转图

```
TrackIn
    │
    ▼
IN_STATION (在站加工)
    │
TrackOut
    │
    ├── PASS ──→ QUEUED (排队下一工位)
    │               │
    │               ├── 非末工序 → 下一工位 TrackIn
    │               └── 末工序 → DONE (已完成)
    │
    └── FAIL ──→ OUT_FAILED (出站失败)
                    │
                    ├── 返修 → 返修工位 TrackIn
                    ├── 报废 → SCRAPPED
                    └── 隔离 → ON_HOLD → MRB评审
```

---

### 7. 追溯查询

#### 7.1 查看产品履历
1. 导航至 **生产执行 → 追溯查询**
2. 输入产品序列号
3. 查看生产履历

> **注意**: 操作员只能查询在自己工位经手过的产品。

---

## 工作流程

### 基本操作循环

```
扫描产品 ──→ 进站确认
    │
    ▼
查看SOP（如需要）
    │
    ▼
执行作业
    │
    ▼
数据采集（如需要）
    │
    ▼
出站确认 ──→ 移交产品
    │
    ▼
扫描下一个产品...
```

### 班次工作流

```
上班打卡
    │
    ▼
登录工位 ──→ 确认工位状态
    │
    ▼
检查待执行产品 ──→ 联系组长（如无产品）
    │
    ▼
执行生产（进站→作业→出站循环）
    │
    ▼
班次结束 ──→ 处理在制产品 ──→ 交接
```

---

## 常见场景

### 场景1: 正常生产
1. 扫描产品进站
2. 按 SOP 完成作业
3. 录入检测数据
4. 确认出站
5. 继续下一个产品

### 场景2: 发现质量问题
1. 作业中发现产品异常
2. 不要强行继续
3. 选择异常出站
4. 描述问题情况
5. 通知组长
6. 等待处理指示

### 场景3: 设备故障
1. 立即停止操作
2. 通知组长
3. 等待维修
4. 恢复后继续

### 场景4: 数据超规
1. 检查测量是否正确
2. 如确实超规：
   - 记录实际数值
   - 选择异常出站
   - 等待质量判定

---

## 操作规范

### 1. 进站规范
- 确认产品与批次匹配
- 确认产品外观无明显损伤
- 确认工位准备就绪

### 2. 作业规范
- 严格按 SOP 操作
- 不跳过任何步骤
- 发现问题立即反馈

### 3. 数据采集规范
- 如实记录测量数据
- 不伪造或修改数据
- 数据异常及时报告

### 4. 出站规范
- 确认作业完成
- 确认数据录入完整
- 产品放置整齐

---

## 快捷操作

### 键盘快捷键
| 快捷键 | 功能 |
|--------|------|
| Enter | 确认进站/出站 |
| F1 | 查看SOP |
| F2 | 数据采集 |
| Esc | 取消当前操作 |

### 扫码枪操作
- 扫描产品码：自动进站
- 扫描出站码：快速出站（如配置）

---

## 与其他角色的协作

| 协作角色 | 协作内容 |
|----------|----------|
| 产线组长 | 问题反馈，工作分配接收 |
| 质量工程师 | 质量问题汇报，检验配合 |
| 其他操作员 | 产品交接，工位协调 |

---

## 常见问题

### Q1: 扫码后没有反应？
- 检查扫码枪是否连接
- 检查条码是否清晰
- 尝试手动输入

### Q2: 提示"批次未授权"？
- 联系组长确认批次状态
- 可能需要等待授权

### Q3: 数据录入错误如何修改？
- 出站前可以重新录入
- 出站后联系组长处理

### Q4: 系统卡顿或无响应？
- 刷新页面
- 如持续异常，联系组长

---

## 注意事项

1. **数据真实性**: 如实记录数据，不得伪造
2. **问题及时报告**: 发现异常立即反馈
3. **安全第一**: 遵守安全操作规程
4. **保持工位整洁**: 5S 规范
5. **交接清楚**: 班次交接时确认在制产品状态
